<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: PQueue</title>

  
    <link rel="SHORTCUT ICON" href="./images/class.png">
  

  <link type="text/css" media="screen" rel="stylesheet" href="./rdoc.css" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body class="class">

  <div class="head">
    <h1>
      
        <img src="./images/class.png" align="absmiddle">&nbsp;
      
      <a href="./index.html">PQueue</a>&nbsp;
      <a href="/">PQueue</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="./lib/pqueue_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/pqueue.rb">lib/pqueue.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <li class="class">Object</li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li class="method"><a href="#M000000">::new</a></li>
          
          <li class="method"><a href="#M000005">#<<</a></li>
          
          <li class="method"><a href="#M000020">#==</a></li>
          
          <li class="method"><a href="#M000012">#clear</a></li>
          
          <li class="method"><a href="#M000002">#downheap</a></li>
          
          <li class="method"><a href="#M000018">#each_pop</a></li>
          
          <li class="method"><a href="#M000011">#empty?</a></li>
          
          <li class="method"><a href="#M000003">#heapify</a></li>
          
          <li class="method"><a href="#M000017">#include?</a></li>
          
          <li class="method"><a href="#M000021">#initialize_copy</a></li>
          
          <li class="method"><a href="#M000019">#inspect</a></li>
          
          <li class="method"><a href="#M000009">#merge</a></li>
          
          <li class="method"><a href="#M000006">#pop</a></li>
          
          <li class="method"><a href="#M000010">#pop_array</a></li>
          
          <li class="method"><a href="#M000004">#push</a></li>
          
          <li class="method"><a href="#M000008">#push_all</a></li>
          
          <li class="method"><a href="#M000013">#replace</a></li>
          
          <li class="method"><a href="#M000016">#replace_top</a></li>
          
          <li class="method"><a href="#M000015">#sort</a></li>
          
          <li class="method"><a href="#M000014">#to_a</a></li>
          
          <li class="method"><a href="#M000007">#top</a></li>
          
          <li class="method"><a href="#M000001">#upheap</a></li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./HISTORY.html">HISTORY</a></li>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./README.html">README</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="class"><a href="./PQueue.html">PQueue</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>

    <div id="validator-badges">
      Generated with <a href="http://github.com/proutils/rdazzle">Razzle Dazzle Redfish</a><br/><br/>
      <a href="http://validator.w3.org/check/referer">[Validate]</a>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>PQueue</h1>
      

      <p>
Priority queue with array based heap.
</p>
<p>
A priority queue is like a standard queue, except that each inserted
elements is given a certain priority, based on the result of the comparison
block given at instantiation time. Also, retrieving an element from the
queue will always return the one with the highest priority (see <a
href="PQueue.html#M000006">pop</a> and <a
href="PQueue.html#M000007">top</a>).
</p>
<p>
The default is to compare the elements in repect to their #> method. For
example, Numeric elements with higher values will have higher priorities.
</p>

    </div>

    <!-- Constants -->
    

    <!-- Attributes -->
    
    <div id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="size-attribute-method" class="method-detail">
        <a name="size"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">size</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
number of elements
</p>
        
        </div>
      </div>
      
      <div id="gt-attribute-method" class="method-detail">
        <a name="gt"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">gt</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
compare Proc
</p>
        
        </div>
      </div>
      
    </div>
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="new-method" class="method-detail ">
        <a name="M000000"></a>

        <div class="method-heading">
        
          <span class="method-name">new</span><span
            class="method-args">(elements=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Returns a new priority queue.
</p>
<p>
If elements are given, build the priority queue with these initial values.
The elements object must respond to <a href="PQueue.html#M000014">to_a</a>.
</p>
<p>
If a block is given, it will be used to determine the priority between the
elements.
</p>
<p>
By default, the priority queue retrieves maximum elements first (using the
#> method).
</p>
          

          
          <div class="method-source-code"
            id="new-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 43</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">elements</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yields: a, b</span>
    <span class="ruby-ivar">@qarray</span> = [<span class="ruby-keyword kw">nil</span>]
    <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
    <span class="ruby-ivar">@gt</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>}
    <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="--method" class="method-detail method-alias">
        <a name="M000005"></a>

        <div class="method-heading">
        
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(v)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="PQueue.html#M000004">push</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="--method" class="method-detail ">
        <a name="M000020"></a>

        <div class="method-heading">
        
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return true if the queues contain equal elements.
</p>
          

          
          <div class="method-source-code"
            id="--source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 268</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">to_a</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="clear-method" class="method-detail ">
        <a name="M000012"></a>

        <div class="method-heading">
        
          <span class="method-name">clear</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Remove all elements from the priority queue.
</p>
          

          
          <div class="method-source-code"
            id="clear-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 197</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear</span>
    <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-keyword kw">nil</span>])
    <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="each-pop-method" class="method-detail ">
        <a name="M000018"></a>

        <div class="method-heading">
        
          <span class="method-name">each_pop</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Iterate over the ordered elements, destructively.
</p>
          

          
          <div class="method-source-code"
            id="each-pop-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 252</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_pop</span> <span class="ruby-comment cmt">#:yields: popped</span>
    <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">pop</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="empty--method" class="method-detail ">
        <a name="M000011"></a>

        <div class="method-heading">
        
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
True if there is no more elements left in the priority queue.
</p>
          

          
          <div class="method-source-code"
            id="empty--source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 192</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@size</span>.<span class="ruby-identifier">zero?</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="include--method" class="method-detail ">
        <a name="M000017"></a>

        <div class="method-heading">
        
          <span class="method-name">include?</span><span
            class="method-args">(element)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return true if the given object is present in the queue.
</p>
          

          
          <div class="method-source-code"
            id="include--source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 247</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">element</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">element</span>)
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="inspect-method" class="method-detail ">
        <a name="M000019"></a>

        <div class="method-heading">
        
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Pretty print
</p>
          

          
          <div class="method-source-code"
            id="inspect-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 260</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
    <span class="ruby-node">&quot;&lt;#{self.class}: size=#{@size}, top=#{top || &quot;nil&quot;}&gt;&quot;</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="merge-method" class="method-detail method-alias">
        <a name="M000009"></a>

        <div class="method-heading">
        
          <span class="method-name">merge</span><span
            class="method-args">(elements)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="PQueue.html#M000008">push_all</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="pop-method" class="method-detail ">
        <a name="M000006"></a>

        <div class="method-heading">
        
          <span class="method-name">pop</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return the element with the highest priority and remove it from the queue.
</p>
<p>
The highest priority is determined by the block given at instanciation
time.
</p>
<p>
The deletion time is O(log n), with n the size of the queue.
</p>
<p>
Return nil if the queue is empty.
</p>
          

          
          <div class="method-source-code"
            id="pop-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 142</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pop</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span>]
    <span class="ruby-ivar">@size</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">downheap</span>(<span class="ruby-value">1</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="pop-array-method" class="method-detail ">
        <a name="M000010"></a>

        <div class="method-heading">
        
          <span class="method-name">pop_array</span><span
            class="method-args">(n=@size)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return top n-element as a sorted array.
</p>
          

          
          <div class="method-source-code"
            id="pop-array-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 184</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pop_array</span>(<span class="ruby-identifier">n</span>=<span class="ruby-ivar">@size</span>)
    <span class="ruby-identifier">ary</span> = []
    <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span>{<span class="ruby-identifier">ary</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pop</span>)}
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ary</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="push-method" class="method-detail ">
        <a name="M000004"></a>

        <div class="method-heading">
        
          <span class="method-name">push</span><span
            class="method-args">(v)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Add an element in the priority queue.
</p>
<p>
The insertion time is O(log n), with n the size of the queue.
</p>
          

          
          <div class="method-source-code"
            id="push-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 124</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">push</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span>] = <span class="ruby-identifier">v</span>
    <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="PQueue.html#M000005">&lt;&lt;</a>
        </div>
        
      </div>

    
      <div id="push-all-method" class="method-detail ">
        <a name="M000008"></a>

        <div class="method-heading">
        
          <span class="method-name">push_all</span><span
            class="method-args">(elements)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Add more than one element at the same time. See <a
href="PQueue.html#M000004">push</a>.
</p>
<p>
The elements object must respond to <a href="PQueue.html#M000014">to_a</a>,
or to be a <a href="PQueue.html">PQueue</a> itself.
</p>
          

          
          <div class="method-source-code"
            id="push-all-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 160</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">push_all</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
        <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">elements</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
        <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">qarray</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
        <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span>{ <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)}
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">to_a</span>
        <span class="ruby-ivar">@qarray</span>[<span class="ruby-ivar">@size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-identifier">ary</span>
        <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span>{ <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">upheap</span>(<span class="ruby-ivar">@size</span>)}
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="PQueue.html#M000009">merge</a>
        </div>
        
      </div>

    
      <div id="replace-method" class="method-detail ">
        <a name="M000013"></a>

        <div class="method-heading">
        
          <span class="method-name">replace</span><span
            class="method-args">(elements)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Replace the content of the heap by the new elements.
</p>
<p>
The elements object must respond to <a href="PQueue.html#M000014">to_a</a>,
or to be a <a href="PQueue.html">PQueue</a> itself.
</p>
          

          
          <div class="method-source-code"
            id="replace-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 206</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">PQueue</span>)
      <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">elements</span>)
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-keyword kw">nil</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">to_a</span>)
      <span class="ruby-ivar">@size</span> = <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">heapify</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="replace-top-method" class="method-detail ">
        <a name="M000016"></a>

        <div class="method-heading">
        
          <span class="method-name">replace_top</span><span
            class="method-args">(v)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Replace the top element with the given one, and return this top element.
</p>
<p>
Equivalent to successively calling <a href="PQueue.html#M000006">pop</a>
and push(v).
</p>
          

          
          <div class="method-source-code"
            id="replace-top-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 232</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_top</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-comment cmt"># replace top element</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">v</span>
      <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
    <span class="ruby-keyword kw">else</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">v</span>
      <span class="ruby-identifier">downheap</span>(<span class="ruby-value">1</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
    <span class="ruby-keyword kw">end</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="sort-method" class="method-detail method-alias">
        <a name="M000015"></a>

        <div class="method-heading">
        
          <span class="method-name">sort</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="PQueue.html#M000014">to_a</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="to-a-method" class="method-detail ">
        <a name="M000014"></a>

        <div class="method-heading">
        
          <span class="method-name">to_a</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return a sorted array, with highest priority first.
</p>
          

          
          <div class="method-source-code"
            id="to-a-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 218</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>
    <span class="ruby-identifier">old_qarray</span> = <span class="ruby-ivar">@qarray</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">old_size</span> = <span class="ruby-ivar">@size</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-identifier">pop_array</span>
    <span class="ruby-ivar">@qarray</span> = <span class="ruby-identifier">old_qarray</span>
    <span class="ruby-ivar">@size</span> = <span class="ruby-identifier">old_size</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="PQueue.html#M000015">sort</a>
        </div>
        
      </div>

    
      <div id="top-method" class="method-detail ">
        <a name="M000007"></a>

        <div class="method-heading">
        
          <span class="method-name">top</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Return the element with the highest priority.
</p>
          

          
          <div class="method-source-code"
            id="top-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 152</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">top</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@qarray</span>[<span class="ruby-value">1</span>]
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="private-instance-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="downheap-method" class="method-detail ">
        <a name="M000002"></a>

        <div class="method-heading">
        
          <span class="method-name">downheap</span><span
            class="method-args">(k)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Assumes the entire tree is a heap.
</p>
<p>
The element at index k will go down until it finds its place.
</p>
          

          
          <div class="method-source-code"
            id="downheap-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 69</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">downheap</span>(<span class="ruby-identifier">k</span>)
    <span class="ruby-identifier">v</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>]
    <span class="ruby-identifier">q2</span> = <span class="ruby-ivar">@size</span>.<span class="ruby-identifier">div</span>(<span class="ruby-value">2</span>)
    <span class="ruby-identifier">loop</span> {
      <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">q2</span>
      <span class="ruby-identifier">j</span> = <span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">k</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">j</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@size</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@gt</span>[<span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>], <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">j</span>]]
        <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@gt</span>[<span class="ruby-identifier">v</span>, <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">j</span>]]
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">j</span>]
      <span class="ruby-identifier">k</span> = <span class="ruby-identifier">j</span>
    }
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>;
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="heapify-method" class="method-detail ">
        <a name="M000003"></a>

        <div class="method-heading">
        
          <span class="method-name">heapify</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Make a heap out of an unordered array.
</p>
          

          
          <div class="method-source-code"
            id="heapify-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 102</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">heapify</span>
    <span class="ruby-ivar">@size</span>.<span class="ruby-identifier">div</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">downto</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">l</span> = <span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">t</span>
        <span class="ruby-identifier">r</span> = <span class="ruby-identifier">l</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">hi</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">r</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@size</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@gt</span>[<span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">l</span>],<span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">r</span>]] <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">l</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@gt</span>[<span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">hi</span>],<span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">t</span>]]
          <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">hi</span>], <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">t</span>] = <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">t</span>], <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">hi</span>]
          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hi</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@size</span>.<span class="ruby-identifier">div</span>(<span class="ruby-value">2</span>)
            <span class="ruby-identifier">t</span> = <span class="ruby-identifier">hi</span>
            <span class="ruby-keyword kw">redo</span>
          <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt"># if</span>
        <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt">#if</span>
      <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt">#begin</span>
    <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt"># downto</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="initialize-copy-method" class="method-detail ">
        <a name="M000021"></a>

        <div class="method-heading">
        
          <span class="method-name">initialize_copy</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="initialize-copy-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 274</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)
    <span class="ruby-ivar">@gt</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">gt</span>
    <span class="ruby-ivar">@qarray</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">qarray</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-ivar">@size</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="upheap-method" class="method-detail ">
        <a name="M000001"></a>

        <div class="method-heading">
        
          <span class="method-name">upheap</span><span
            class="method-args">(k)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Assumes that the tree is a heap, for nodes < k.
</p>
<p>
The element at index k will go up until it finds its place.
</p>
          

          
          <div class="method-source-code"
            id="upheap-source">
<pre>
<span class="ruby-comment cmt"># File lib/pqueue.rb, line 55</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upheap</span>(<span class="ruby-identifier">k</span>)
    <span class="ruby-identifier">k2</span> = <span class="ruby-identifier">k</span>.<span class="ruby-identifier">div</span>(<span class="ruby-value">2</span>)
    <span class="ruby-identifier">v</span> = <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>]
    <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">k2</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@gt</span>[<span class="ruby-identifier">v</span>, <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k2</span>]]
      <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k2</span>]
      <span class="ruby-identifier">k</span> = <span class="ruby-identifier">k2</span>
      <span class="ruby-identifier">k2</span> = <span class="ruby-identifier">k2</span>.<span class="ruby-identifier">div</span>(<span class="ruby-value">2</span>)
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-ivar">@qarray</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</body>
</html>
